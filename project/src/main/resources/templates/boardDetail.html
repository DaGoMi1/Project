<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/CSS/home.css" />
    <script src="https://kit.fontawesome.com/f668b9b848.js" crossorigin="anonymous"></script>
</head>
<body>
<div id="member-load" th:insert="~{fragments/MemberInformation :: MemberInformation}"></div>
<div id="nav-load" th:insert="~{fragments/Navigation :: Navigation}"></div>

<div th:if="${posting != null}">
    <h2 th:text="${posting.title}"></h2>
    <p>글 작성자: <span th:text="${posting.author}"></span></p>
    <p>글 내용: <span th:text="${posting.content}"></span></p>
    <!-- 이미지 렌더링 -->
    <img th:if="${posting.image != null}" th:src="@{'/IMG/' + ${posting.image}}" alt="이미지">

    <!-- 비디오 렌더링 -->
    <video th:if="${posting.video != null}" controls>
        <source th:src="@{'/file/' + ${posting.video}}" type="video/avi">
        Your browser does not support the video tag.
    </video>

    <!-- 파일 다운로드 링크 -->
    <a th:if="${posting.file != null}" th:href="@{'/file/' + ${posting.file}}" download>파일 다운로드</a>

    <!-- 링크 -->
    <a th:if="${posting.link != null}" th:href="${posting.link}" target="_blank">링크 바로가기</a>

    <p>작성일시: <span th:text="${posting.created_at}"></span></p>

    <form th:with="userId=${userId}"
          th:if="${posting.getUserId() eq userId}"
          th:action="@{'/' + ${posting.boardType eq 'notice' ? 'notice' : 'board'} + '/edit'}" method="get">

        <input type="hidden" name="postId" th:value="${posting.id}" />
        <input type="submit" class="write" value="수정">
    </form>

    <form th:with="userId=${userId}"
          th:if="${posting.getUserId() eq userId}"
          th:action="@{'/' + ${posting.boardType eq 'notice' ? 'notice' : 'board'} + '/delete'}" method="post">

        <input type="hidden" name="postId" th:value="${posting.id}" />
        <input type="submit" class="write" value="삭제">
    </form>

    <input th:with="userId=${userId}"
           th:unless="${posting.getUserId() == userId}" type="submit" class="write" style="display: none;">

</div>
<script src="/JS/home.js"></script>
</body>
</html>
